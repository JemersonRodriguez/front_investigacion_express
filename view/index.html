<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema Administrativo de Tareas</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./estilos.css" />
  </head>
  <body
    style="justify-content: space-between"
    class="bg-light d-flex flex-column min-vh-100"
  >
    <main>
      <!-- Login View -->
      <section
        id="loginView"
        class="card shadow p-4"
        style="min-width: 320px; max-width: 400px"
      >
        <h2 class="mb-4 text-center">Login</h2>
        <div class="mb-3">
          <input
            type="text"
            id="username"
            class="form-control"
            placeholder="Usuario"
          />
        </div>
        <div class="mb-3">
          <input
            type="password"
            id="password"
            class="form-control"
            placeholder="Contraseña"
          />
        </div>
        <button onclick="Login()" class="btn btn-primary w-100">
          Iniciar Sesión
        </button>
      </section>

      <!-- Usuario View -->
      <section
        id="usuarioView"
        hidden
        class="card shadow p-4 text-center"
        style="min-width: 320px; max-width: 800px"
      >
        <h2 class="mb-4">Bienvenido Usuario</h2>
        <div id="tareasContainer"></div>
        <button onclick="logout()" class="btn btn-secondary mt-3">
          Cerrar Sesión
        </button>
      </section>

      <!-- Admin View -->
      <section
        hidden
        id="adminView"
        class="card shadow p-4 text-center"
        style="min-width: 320px; max-width: 900px"
      >
        <h2 class="mb-4">Panel de Administrador</h2>
        <div class="mb-3 d-flex justify-content-between">
          <input
            id="filtroTarea"
            class="form-control w-50"
            placeholder="Filtrar por título o usuario"
            oninput="filtrarTareasAdmin()"
          />
          <button
            class="btn btn-success ms-2"
            data-bs-toggle="modal"
            data-bs-target="#modalCrearTarea"
          >
            Crear Tarea
          </button>
        </div>
        <div id="adminTareasContainer"></div>
        <button onclick="logout()" class="btn btn-secondary mt-3">
          Cerrar Sesión
        </button>
      </section>

      <!-- Modal para crear tarea -->
      <div
        class="modal fade"
        id="modalCrearTarea"
        tabindex="-1"
        aria-labelledby="modalCrearTareaLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <form class="modal-content" onsubmit="crearTareaAdmin(event)">
            <div class="modal-header">
              <h5 class="modal-title" id="modalCrearTareaLabel">
                Crear Nueva Tarea
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Cerrar"
              ></button>
            </div>
            <div class="modal-body">
              <div class="mb-2">
                <input
                  required
                  type="text"
                  class="form-control"
                  id="tituloTarea"
                  placeholder="Título"
                />
              </div>
              <div class="mb-2">
                <textarea
                  required
                  class="form-control"
                  id="descripcionTarea"
                  placeholder="Descripción"
                ></textarea>
              </div>
              <div class="mb-2">
                <input
                  required
                  type="date"
                  class="form-control"
                  id="fechaVencimientoTarea"
                />
              </div>
              <div class="mb-2">
                <select required class="form-control" id="prioridadTarea">
                  <option value="">Prioridad</option>
                  <option value="alta">Alta</option>
                  <option value="media">Media</option>
                  <option value="baja">Baja</option>
                </select>
              </div>
              <div class="mb-2">
                <input
                  required
                  type="text"
                  class="form-control"
                  id="lugarTarea"
                  placeholder="Lugar"
                />
              </div>
              <div class="mb-2">
                <input
                  required
                  type="number"
                  min="1"
                  class="form-control"
                  id="horasTarea"
                  placeholder="Cantidad de horas"
                />
              </div>
              <div class="mb-2">
                <select required class="form-control" id="usuarioAsignadoTarea">
                  <option value="">Asignar a usuario</option>
                  <!-- Opciones generadas dinámicamente -->
                </select>
              </div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Crear</button>
            </div>
          </form>
        </div>
      </div>
    </main>

    <footer>
      <div class="container">
        <p class="mb-1">&copy; 2025 Sistema Administrativo de Tareas</p>
        <p class="mb-1">Desarrollado por Jemerson, Jean Carlo y Jonaikel</p>
        <p class="mb-0">
          Contactos Programadores:
          <a href="mailto:jemerson@email.com">jemerson@email.com</a>,
          <a href="mailto:jeancarlo@email.com">jeancarlo@email.com</a>,
          <a href="mailto:jonaikel@email.com">jonaikel@email.com</a>
        </p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Scripts de funcionalidades -->
    <script src="../actions/tareas.js" defer></script>
    <script src="../actions/auth.js" defer></script>
    <script src="../actions/usuario.js" defer></script>
  </body>
</html>
